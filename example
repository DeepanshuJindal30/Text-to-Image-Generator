[HttpPost("register")]
public async Task<IActionResult> Register(string email, string password)
{
    // 1️⃣ Validate email format
    if (string.IsNullOrWhiteSpace(email) || !IsValidEmail(email))
        return BadRequest("Invalid email format. Please use a valid email address.");

    // 2️⃣ Create user
    var user = new AppUser { UserName = email, Email = email };
    var result = await _userManager.CreateAsync(user, password);
    if (!result.Succeeded) return BadRequest(result.Errors);

    return Ok("User registered successfully");
}

// Helper method for email validation
private bool IsValidEmail(string email)
{
    try
    {
        var addr = new System.Net.Mail.MailAddress(email);
        return addr.Address == email;
    }
    catch
    {
        return false;
    }
}



const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

if (!emailRegex.test(email)) {
  alert("Please enter a valid email address");
  return;
}