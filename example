const handleLogin = async () => {
  try {
    const res = await api.post("/auth/login", { 
      usernameOrEmail: username,  // âœ… match backend property
      password 
    });

    localStorage.setItem("token", res.data.token);
    localStorage.setItem("roles", JSON.stringify(res.data.roles));

    api.defaults.headers.common["Authorization"] = `Bearer ${res.data.token}`;
    dispatch(setAuth({ token: res.data.token, roles: res.data.roles }));

    alert("Login Successful");

    if (res.data.roles.includes("Admin")) {
      navigate("/aml");
    } else if (res.data.roles.includes("Manager")) {
      navigate("/trustee");
    } else {
      navigate("/sp");
    }
  } catch (err) {
    alert("Login Failed: " + (err.response?.data || err.message));
  }
};